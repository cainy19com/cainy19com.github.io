<!doctype html>

<meta charset="utf-8">

<meta name="viewport" content="width=device-width,in
itial-scale=1">

<style>
* {
  box-sizing: border-box;
}

textarea {
  font-family: KaTeX_Main-Regular;
  font-family: monospace;
  font-size: 16px;
  width: 100%;
  height: 200px;
  padding: 15px;
}

button {
  width: 70px;
  height: 40px;
  background: black;
  color: white;
}

div {
  margin-top: 20px;
}
</style>

<link rel="stylesheet" 
href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" 
integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" 
crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>

<textarea id="exp"></textarea>
<!--<button id="clear">clear</button>-->
<button id="copy">copy</button>
<div id="render"></div>

<script>
const $ = document.querySelector.bind(document)
const $$ = document.querySelectorAll.bind(document)

const render = $('#render')
const exp = $('#exp')
const clear = $('#clear')
const copy = $('#copy')

const f = e => {
  katex.render(exp.value, render, {throwOnError: false})
}
["keyup", "blur"].forEach(e => exp.addEventListener(e, f))

clear.addEventListener('click', e => {
  exp.value = ""
})

copy.addEventListener('click', e => {
  navigator.clipboard.writeText(exp.value)
})

</script>
